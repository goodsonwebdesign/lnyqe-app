<div class="container max-w-full space-y-6 px-4 py-6" data-testid="dashboard-container">
  <!-- Mobile Navigation Tabs - Only visible on smaller screens -->
  <app-dashboard-mobile-navigation
    [activeSection]="activeSection"
    [userRole]="userRole"
    [sections]="navigationSections"
    (sectionSelect)="setActiveSection($event)"
  ></app-dashboard-mobile-navigation>

  <!-- Quick Actions Bar - Uses the new component -->
  <app-dashboard-quick-actions
    [quickActions]="quickActions"
    (actionSelect)="handleAction($event)"
  ></app-dashboard-quick-actions>

  <!-- Main Dashboard Content - Shows different content based on active section -->
  <!-- OVERVIEW, TASKS, and SCHEDULE sections -->
  <div
    *ngIf="
      isSectionActive(SECTION_OVERVIEW) ||
      isSectionActive(SECTION_TASKS) ||
      isSectionActive(SECTION_SCHEDULE)
    "
    class="space-y-6"
  >
    <!-- Stats Overview Cards - Only shown in overview section on mobile -->
    <div
      *ngIf="isSectionActive(SECTION_OVERVIEW)"
      class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"
      id="section-overview"
      role="tabpanel"
      [attr.aria-labelledby]="'nav-overview-button'"
      data-testid="dashboard-section-overview"
    >
      <app-dashboard-overview-section
        [statCards]="statCards"
        [tasks]="tasks"
        [scheduleItems]="scheduleItems"
        [notifications]="notifications"
        [systemStatuses]="systemStatuses"
        [getStatusClass]="getStatusClass"
        [getNotificationIconName]="getNotificationIconName"
        [getNotificationIconBg]="getNotificationIconBg"
        [getNotificationIconColor]="getNotificationIconColor"
        (viewAllTasks)="setActiveSection(SECTION_TASKS)"
        (viewFullSchedule)="setActiveSection(SECTION_SCHEDULE)"
        (createTask)="createTaskAction.emit()"
        (addEvent)="scheduleEventAction.emit()"
        (viewAllNotifications)="handleAction('view-all-notifications')"
        (viewSystemDetails)="handleAction('view-system-details')"
      ></app-dashboard-overview-section>
  </div> <!-- Closes the *ngIf="isSectionActive(SECTION_OVERVIEW)" div (the inner one for overview content) -->
    <!-- TASKS Section -->
    <div *ngIf="isSectionActive(SECTION_TASKS)"
         id="section-tasks"
         role="tabpanel"
         [attr.aria-labelledby]="'nav-tasks-button'"
         data-testid="dashboard-section-tasks"
         class="p-4 sm:p-6 bg-white dark:bg-neutral-800 rounded-lg shadow">
      <h3 class="text-lg font-semibold text-neutral-700 dark:text-neutral-200 mb-4">Tasks</h3>
      <p class="text-neutral-500 dark:text-neutral-400">Task management features will be displayed here.</p>
      <!-- Placeholder for actual task component or content -->
    </div>
    <!-- END TASKS Section -->

    <!-- SCHEDULE Section -->
    <div *ngIf="isSectionActive(SECTION_SCHEDULE)"
         id="section-schedule"
         role="tabpanel"
         [attr.aria-labelledby]="'nav-schedule-button'"
         data-testid="dashboard-section-schedule"
         class="p-4 sm:p-6 bg-white dark:bg-neutral-800 rounded-lg shadow">
      <h3 class="text-lg font-semibold text-neutral-700 dark:text-neutral-200 mb-4">Schedule</h3>
      <p class="text-neutral-500 dark:text-neutral-400">Scheduling information and calendars will be displayed here.</p>
      <!-- Placeholder for actual schedule component or content -->
    </div>
    <!-- END SCHEDULE Section -->
  </div> <!-- ADDED: Closes the *ngIf="isSectionActive(SECTION_OVERVIEW) || ..." div (DIV A from line 18) -->


</div>
